<html><head><script type="text/javascript">
<!--
function checkOpener()
{
    window.setTimeout('window.close();', 1000);
    var contextPath = window.location.pathname;
    if (contextPath.substring(0,1) != '/')
	{
	contextPath = '/'+contextPath;
	}
    var lastSlash = contextPath.lastIndexOf('/');
    contextPath = contextPath.substring(0, lastSlash+1);
			    
    var searchStr = window.location.search;
    if (searchStr.charAt(0) == '?')
	{
	searchStr = searchStr.substring(1);
	}

    var mgrIdx = searchStr.indexOf('managerId=');
    var mgrParam = searchStr.substring(mgrIdx);

    var exitURL = contextPath 
	    + 'UnifyNXJ.jsp?commandName=EXIT_UNLOAD&'
	    + mgrParam;

    // The window containing the app is gone
    // kill app
	try{
    if (!opener || opener.closed)
	{
	window.location.href = exitURL;
	}
    else if (opener)
	{
	try
	    {
	    // Check for refresh button or navigation to a new app
	    if (opener.location.href)
		{
		var ampIdx = searchStr.indexOf('&');
		var entryPoint = searchStr.substring(0, ampIdx);
		var origPathname = contextPath + entryPoint;
		// The window is in the same domain but a different entry point
		// kill app
		if (opener.location.pathname != origPathname)
		    {
		    window.location.href = exitURL;
		    }
		else
		    {
		    // refresh button: don't kill app
		    }
		}
	    }
	catch(e)
	    {
	    // The window containing the app is now in a new domain
	    // kill app
	    window.location.href = exitURL;
	    }
	}
	}catch(e)
		{
		window.location.href = exitURL;
		}

}
-->
</script></head><body onload="checkOpener()"></body></html>
